(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{67421:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return jt}});var r,a,s,o,i,c,l,d=n(85169),u=n(2734),x=n(98396),p=n(87357),v=n(33454),h=n(96420),m=n(15861),k=n(86886),f=n(5151),j=n(56371),b=n(67294),g=n(64283),y=n(83321),w=n(12523),A=n(56365),C=n(53219),O=n(15629),T=n(75834),E=n(85893),N=function(e){var t=e.open,n=e.close;return(0,E.jsxs)(O.P,{open:t,setOpen:n,children:[(0,E.jsx)(m.Z,{variant:"h2",children:(0,E.jsx)(d.cC,{id:"Get ABP Token"})}),(0,E.jsx)(m.Z,{sx:{my:6},children:(0,E.jsx)(d.cC,{id:"The Aave Balancer Pool Token (ABPT) is a liquidity pool token. You can receive ABPT by depositing a combination of AAVE + ETH in the Balancer liquidity pool. You can then stake your BPT in the Safety Module to secure the protocol and earn Safety Incentives."})}),(0,E.jsx)(y.Z,{variant:"outlined",size:"large",endIcon:(0,E.jsx)(C.Z,{children:(0,E.jsx)(A.Z,{})}),fullWidth:!0,sx:{px:4},href:"https://pools.balancer.exchange/#/pool/0xc697051d1c6296c24ae3bcef39aca743861d9a81/",target:"_blank",rel:"noopener",children:(0,E.jsxs)(p.Z,{sx:{display:"flex",flexGrow:1},children:[(0,E.jsx)(T.T1,{symbol:"BAL",sx:{mr:2}}),(0,E.jsx)(d.cC,{id:"Go to Balancer Pool"})]})})]})},I=function(){var e=(0,b.useState)(null),t=e[0],n=e[1],r=Boolean(t);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(w.y,{title:"Get ABP tokens to stake within the Aave Protocol",children:(0,E.jsx)(y.Z,{variant:"outlined",size:"small",onClick:function(e){n(e.currentTarget)},"data-cy":"getAbp-token",startIcon:(0,E.jsx)(p.Z,{sx:{mr:-1},children:(0,E.jsx)(T.T1,{symbol:"BAL",sx:{fontSize:"14px"}})}),children:(0,E.jsx)(d.cC,{id:"Get ABP Token"})})}),(0,E.jsx)(N,{open:r,close:function(){n(null)}})]})},S=n(44949),U=n(1279),P=n(72005),Z=n(59499),D=n(19091),B={chainId:D.a_.mainnet,stakeDataProvider:"0xc57450af527d10Fe182521AB39C1AD23c1e1BaDE",tokens:(r={},(0,Z.Z)(r,D.hj.aave,{TOKEN_STAKING:"0x4da27a545c0c5b758a6ba100e3a049001de870f5",STAKING_REWARD_TOKEN:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",STAKING_HELPER:"0xce0424653fb2fd48ed1b621bdbd60db16b2e388a"}),(0,Z.Z)(r,D.hj.bpt,{TOKEN_STAKING:"0xa1116930326D21fB917d5A27F1E9943A9595fb47",STAKING_REWARD_TOKEN:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9"}),r)},G=n(50029),_=n(87794),R=n.n(_),L=n(27923),W=n(66252),F=n(2450),V=n(71383),H=n(17283),M=n(81613);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={},Y=(0,H.Ps)(a||(a=(0,V.Z)(["\n  fragment StakeGeneralUIDataFragment on StakeGeneralUIData {\n    aave {\n      stakeTokenTotalSupply\n      stakeCooldownSeconds\n      stakeUnstakeWindow\n      stakeTokenPriceEth\n      rewardTokenPriceEth\n      stakeApy\n      distributionPerSecond\n      distributionEnd\n    }\n    bpt {\n      stakeTokenTotalSupply\n      stakeCooldownSeconds\n      stakeUnstakeWindow\n      stakeTokenPriceEth\n      rewardTokenPriceEth\n      stakeApy\n      distributionPerSecond\n      distributionEnd\n    }\n    usdPriceEth\n  }\n"]))),$=(0,H.Ps)(s||(s=(0,V.Z)(["\n  fragment StakeUserUIDataFragment on StakeUserUIData {\n    aave {\n      stakeTokenUserBalance\n      underlyingTokenUserBalance\n      userCooldown\n      userIncentivesToClaim\n      userPermitNonce\n    }\n    bpt {\n      stakeTokenUserBalance\n      underlyingTokenUserBalance\n      userCooldown\n      userIncentivesToClaim\n      userPermitNonce\n    }\n    usdPriceEth\n  }\n"]))),z=(0,H.Ps)(o||(o=(0,V.Z)(["\n  query C_StakeGeneralUIData {\n    stakeGeneralUIData {\n      ...StakeGeneralUIDataFragment\n    }\n  }\n  ","\n"])),Y);(0,H.Ps)(i||(i=(0,V.Z)(["\n  subscription C_StakeGeneralUIDataUpdate {\n    stakeGeneralUIDataUpdate {\n      ...StakeGeneralUIDataFragment\n    }\n  }\n  ","\n"])),Y);var X=(0,H.Ps)(c||(c=(0,V.Z)(["\n  query C_StakeUserUIData($userAddress: String!, $chainId: Int!) {\n    stakeUserUIData(userAddress: $userAddress, chainId: $chainId) {\n      ...StakeUserUIDataFragment\n    }\n  }\n  ","\n"])),$);(0,H.Ps)(l||(l=(0,V.Z)(["\n  subscription C_StakeUserUIDataUpdate($userAddress: String!, $chainId: Int!) {\n    stakeUserUIDataUpdate(userAddress: $userAddress, chainId: $chainId) {\n      ...StakeUserUIDataFragment\n    }\n  }\n  ","\n"])),$);var J=n(45555);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=b.createContext({}),re=function(e){var t=e.children,n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,W.x)().cache,a=(0,J.f)(),s=a.currentNetworkConfig,o=a.jsonRpcProvider,i=s.isFork&&s.underlyingChainId===(null===B||void 0===B?void 0:B.chainId)?o:(0,F.VH)(B.chainId),c=new D.hR({provider:i,uiStakeDataProvider:B.stakeDataProvider}),l=function(){var e=(0,G.Z)(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getGeneralStakeUIDataHumanized();case 3:t=e.sent,r.writeQuery({query:z,data:{__typename:"Query",stakeGeneralUIData:te({__typename:"StakeGeneralUIData"},t)}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Stake general data loading error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var n=(0,G.Z)(R().mark((function n(){var a;return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,c.getUserStakeUIDataHumanized({user:e});case 5:a=n.sent,r.writeQuery({query:X,data:{__typename:"Query",stakeUserUIData:te({__typename:"StakeUserUIData"},a)},variables:{userAddress:e,chainId:t}}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),console.log("Stake user data user loading error",n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(){return n.apply(this,arguments)}}();return(0,L.W)(l,3e4,n,[]),(0,L.W)(d,3e4,n||!e,[e]),{refresh:function(){return Promise.all([l(),d()])}}}((0,P.Z)().currentAccount,B.chainId),r=n.refresh;return(0,E.jsx)(ne.Provider,{value:{refresh:r},children:t})},ae=function(){var e=(0,P.Z)().currentAccount,t=function(e){var t=K(K({},Q),e);return M.a(X,t)}({variables:{userAddress:e,chainId:B.chainId},skip:!e,fetchPolicy:"cache-only"}).data,n=function(e){var t=K(K({},Q),e);return M.a(z,t)}({fetchPolicy:"cache-only"}).data;return{stakeUserResult:t,stakeGeneralResult:n,loading:!n||!!e&&!t}},se=n(35783),oe=n(38577),ie=function(){return(0,E.jsxs)(se.v,{severity:"warning",sx:{".MuiAlert-message":{p:0},mb:6},children:[(0,E.jsx)(m.Z,{variant:"subheader1",children:(0,E.jsx)(d.cC,{id:"Cooldown period warning"})}),(0,E.jsx)(m.Z,{variant:"caption",children:(0,E.jsx)(d.cC,{id:"The cooldown period is the time required prior to unstaking your tokens(10 days). You can only withdraw your assets from the Security Module after the cooldown period and within the active the unstake window.<0>Learn more</0>",components:{0:(0,E.jsx)(oe.rU,{href:"https://docs.aave.com/faq/migration-and-staking",fontWeight:500})}})})]})},ce=n(8359),le=n(40429),de=n(83063),ue=n(44880),xe=n(67944),pe=n(37096),ve=n(19408),he=n(4730),me=b.createContext({}),ke=function(e){var t=e.children,n=(0,J.f)(),r=n.jsonRpcProvider,a=n.currentNetworkConfig,s=a.isFork&&a.underlyingChainId===B.chainId?r:(0,F.VH)(B.chainId),o={};return Object.keys(B.tokens).forEach((function(e){var t=new D.st(s,{TOKEN_STAKING_ADDRESS:B.tokens[e].TOKEN_STAKING});o[e]=t})),(0,E.jsx)(me.Provider,{value:{stakingServices:o},children:t})},fe=function(e){return(0,b.useContext)(me).stakingServices[e]},je=n(92997),be=n(75670),ge=["amountToStake","isWrongNetwork","sx","symbol","blocked","selectedToken"];function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var we,Ae=function(e){var t=e.amountToStake,n=e.isWrongNetwork,r=e.sx,a=e.symbol,s=e.blocked,o=e.selectedToken,i=(0,he.Z)(e,ge),c=(0,P.Z)().currentAccount,l=fe(o),u=(0,je.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,G.Z)(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.stake(c,t.toString()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:!t||0===parseFloat(t)||s,deps:[t]}),x=u.action,p=u.approval,v=u.requiresApproval,h=u.loadingTxns,m=u.approvalTxState,k=u.mainTxState;return(0,E.jsx)(be.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({requiresApproval:v,preparingTransactions:h,mainTxState:k,approvalTxState:m,isWrongNetwork:n,amount:t,handleAction:x,handleApproval:p,symbol:a,requiresAmount:!0,actionText:(0,E.jsx)(d.cC,{id:"Stake"}),actionInProgressText:(0,E.jsx)(d.cC,{id:"Staking"}),sx:r},i))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(we||(we={}));var Ce=function(e){var t,n,r,a=e.stakeAssetName,s=e.icon,o=ae(),i=null===(t=o.stakeGeneralResult)||void 0===t?void 0:t.stakeGeneralUIData[a],c=(0,P.Z)().chainId,l=(0,S.vR)(),u=l.gasLimit,x=l.mainTxState,p=l.txError,v=(0,J.f)(),h=v.currentNetworkConfig,k=v.currentChainId,f=(0,b.useState)(""),j=f[0],g=f[1],y=(0,b.useRef)(),w=(0,U.Fv)((null===(n=o.stakeUserResult)||void 0===n?void 0:n.stakeUserUIData[a].underlyingTokenUserBalance)||"0",18),A="-1"===j,C=A?w:j,O=Number(C)*(Number((0,U.Fv)((null===i||void 0===i?void 0:i.stakeTokenPriceEth)||1,18))/Number((0,U.Fv)((null===(r=o.stakeGeneralResult)||void 0===r?void 0:r.stakeGeneralUIData.usdPriceEth)||1,18))),T=void 0;(0,U.hE)(C).gt(w)&&(T=we.NOT_ENOUGH_BALANCE);var N=h.isFork&&h.underlyingChainId===B.chainId?k:B.chainId,I=c!==N,Z=(0,F.Mo)(N);return p&&p.blocking?(0,E.jsx)(le.D,{txError:p}):x.success?(0,E.jsx)(ue.R,{action:(0,E.jsx)(d.cC,{id:"Staked"}),amount:y.current,symbol:s}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.E,{title:"Stake",symbol:s}),I&&(0,E.jsx)(ve.I,{networkName:Z.name,chainId:N}),(0,E.jsx)(ie,{}),(0,E.jsx)(ce.W,{value:C,onChange:function(e){var t="-1"===e;y.current=t?w:e,g(e)},usdValue:O.toString(),symbol:s,assets:[{balance:w.toString(),symbol:s}],isMaxSelected:A,maxValue:w.toString()}),void 0!==T&&(0,E.jsx)(m.Z,{variant:"helperText",color:"red",children:T===we.NOT_ENOUGH_BALANCE?(0,E.jsx)(d.cC,{id:"Not enough balance on your wallet"}):null}),(0,E.jsx)(xe.m6,{gasLimit:u,children:(0,E.jsx)(xe.oD,{description:(0,E.jsx)(d.cC,{id:"Staking APR"}),value:Number((null===i||void 0===i?void 0:i.stakeApy)||"0")/1e4,percent:!0})}),p&&(0,E.jsx)(de.Q,{txError:p}),(0,E.jsx)(Ae,{sx:{mt:"48px"},amountToStake:C,isWrongNetwork:I,symbol:s,blocked:void 0!==T,selectedToken:a})]})},Oe=function(){var e=(0,S.vR)(),t=e.type,n=e.close,r=e.args;return(0,E.jsx)(O.P,{open:t===S.w8.Stake,setOpen:n,children:(null===r||void 0===r?void 0:r.icon)&&(null===r||void 0===r?void 0:r.stakeAssetName)&&(0,E.jsx)(Ce,{icon:r.icon,stakeAssetName:r.stakeAssetName})})},Te=n(52358),Ee=n(21737),Ne=n(50480),Ie=n(69368),Se=function(e){return e/60/60/24},Ue=function(e){return e/60/60},Pe=n(36787),Ze=["isWrongNetwork","sx","blocked","selectedToken"];function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Be,Ge=function(e){var t=e.isWrongNetwork,n=e.sx,r=e.blocked,a=e.selectedToken,s=(0,he.Z)(e,Ze),o=(0,P.Z)().currentAccount,i=fe(a),c=(0,je.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,G.Z)(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.cooldown(o));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:r,deps:[]}),l=c.action,u=c.loadingTxns,x=c.mainTxState,p=c.requiresApproval;return(0,E.jsx)(be.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({requiresApproval:p,blocked:r,preparingTransactions:u,handleAction:l,actionText:(0,E.jsx)(d.cC,{id:"ACTIVATE COOLDOWN"}),actionInProgressText:(0,E.jsx)(d.cC,{id:"ACTIVATE COOLDOWN"}),mainTxState:x,isWrongNetwork:t,sx:n},s))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE",e[e.ALREADY_ON_COOLDOWN=1]="ALREADY_ON_COOLDOWN"}(Be||(Be={}));var _e=function(e){var t=e.stakeAssetName,n=ae(),r=n.stakeUserResult,a=n.stakeGeneralResult,s=(0,P.Z)().chainId,o=(0,S.vR)(),i=o.gasLimit,c=o.mainTxState,l=o.txError,u=(0,J.f)(),x=u.currentNetworkConfig,v=u.currentChainId,h=(0,b.useState)(!1),k=h[0],f=h[1],g=null===r||void 0===r?void 0:r.stakeUserUIData[t],y=null===a||void 0===a?void 0:a.stakeGeneralUIData[t],w=Date.now()/1e3,A=(null===y||void 0===y?void 0:y.stakeCooldownSeconds)||0,O=(null===g||void 0===g?void 0:g.userCooldown)||0,T=(null===y||void 0===y?void 0:y.stakeUnstakeWindow)||0,N=w-O<A+T,I=(0,U.hE)(A).dividedBy(A+T).multipliedBy(100).toNumber(),Z=(0,U.hE)(T).dividedBy(A+T).multipliedBy(100).toNumber(),D=I<15?15:I>85?85:I,G=Z<15?15:Z>85?85:Z,_=null===r||void 0===r?void 0:r.stakeUserUIData[t].stakeTokenUserBalance,R=void 0;"0"===_?R=Be.NOT_ENOUGH_BALANCE:N&&(R=Be.ALREADY_ON_COOLDOWN);var L=x.isFork&&x.underlyingChainId===B.chainId?v:B.chainId,W=s!==L,V=(0,F.Mo)(L);if(l&&l.blocking)return(0,E.jsx)(le.D,{txError:l});if(c.success)return(0,E.jsx)(ue.R,{action:(0,E.jsx)(d.cC,{id:"Stake cooldown activated"})});var H=function(e){return"".concat(function(e){return Se(e)<1?Ue(e)<1?function(e){return e/60}(e):Ue(e):Se(e)}(e)," ").concat(function(e){return Se(e)<1?Ue(e)<1?"minutes":"hours":"days"}(e))};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.E,{title:"Cooldown to unstake"}),W&&(0,E.jsx)(ve.I,{networkName:V.name,chainId:L}),(0,E.jsxs)(m.Z,{variant:"description",sx:{mb:6},children:[(0,E.jsx)(d.cC,{id:"The cooldown period is {0}. After {1} of cooldown, you will enter unstake window of {2}. You will continue receiving rewards during cooldown and unstake window.",values:{0:H(A),1:H(A),2:H(T)}})," ",(0,E.jsx)(oe.rU,{variant:"description",href:"https://docs.aave.com/faq/migration-and-staking",sx:{textDecoration:"underline"},children:(0,E.jsx)(d.cC,{id:"Learn more"})}),"."]}),(0,E.jsxs)(p.Z,{mb:6,children:[(0,E.jsxs)(p.Z,{sx:{width:"".concat(G,"%"),display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",flexDirection:"column",ml:"auto"},children:[(0,E.jsx)(m.Z,{variant:"helperText",mb:1,children:(0,E.jsx)(d.cC,{id:"You unstake here"})}),(0,E.jsx)(C.Z,{sx:{fontSize:"13px"},children:(0,E.jsx)(Te.Z,{})})]}),(0,E.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",my:3},children:[(0,E.jsx)(p.Z,{sx:{height:"2px",width:"".concat(D,"%"),bgcolor:"error.main",position:"relative","&:after":{content:"''",position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",bgcolor:"error.main",width:"2px",height:"8px",borderRadius:"2px"}}}),(0,E.jsx)(p.Z,{sx:{height:"2px",width:"".concat(G,"%"),bgcolor:"success.main",position:"relative","&:after, &:before":{content:"''",position:"absolute",top:"50%",transform:"translateY(-50%)",bgcolor:"success.main",width:"2px",height:"8px",borderRadius:"2px"},"&:before":{left:0},"&:after":{right:0}}})]}),(0,E.jsxs)(p.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,E.jsxs)(p.Z,{children:[(0,E.jsx)(m.Z,{variant:"helperText",mb:1,children:(0,E.jsx)(d.cC,{id:"Cooldown period"})}),(0,E.jsx)(m.Z,{variant:"subheader2",color:"error.main",children:(0,E.jsx)(d.cC,{id:"{0}",values:{0:H(A)}})})]}),(0,E.jsxs)(p.Z,{sx:{textAlign:"right"},children:[(0,E.jsx)(m.Z,{variant:"helperText",mb:1,children:(0,E.jsx)(d.cC,{id:"Unstake window"})}),(0,E.jsx)(m.Z,{variant:"subheader2",color:"success.main",children:(0,E.jsx)(d.cC,{id:"{0}",values:{0:H(T)}})})]})]})]}),void 0!==R&&(0,E.jsx)(m.Z,{variant:"helperText",color:"red",children:function(){switch(R){case Be.NOT_ENOUGH_BALANCE:return(0,E.jsx)(d.cC,{id:"Nothing staked"});case Be.ALREADY_ON_COOLDOWN:return(0,E.jsx)(d.cC,{id:"Already on cooldown"});default:return null}}()}),(0,E.jsx)(Ee.Z,{severity:"error",sx:{mb:6},children:(0,E.jsx)(m.Z,{variant:"caption",children:(0,E.jsx)(d.cC,{id:"If you DO NOT unstake within {0} of unstake window, you will need to activate cooldown process again.",values:{0:H(T)}})})}),(0,E.jsx)(Pe.g,{gasLimit:(0,j.parseUnits)(i||"0","wei")}),(0,E.jsx)(Ne.Z,{sx:{mt:12},control:(0,E.jsx)(Ie.Z,{checked:k,onClick:function(){return f(!k)},inputProps:{"aria-label":"controlled"},"data-cy":"cooldownAcceptCheckbox"}),label:(0,E.jsx)(d.cC,{id:"I understand how cooldown ({0}) and unstaking ({1}) work",values:{0:H(A),1:H(T)}})}),l&&(0,E.jsx)(de.Q,{txError:l}),(0,E.jsx)(Ge,{sx:{mt:"48px"},isWrongNetwork:W,blocked:void 0!==R||!k,selectedToken:t})]})},Re=function(){var e=(0,S.vR)(),t=e.type,n=e.close,r=e.args;return(0,E.jsx)(O.P,{open:t===S.w8.StakeCooldown,setOpen:n,children:(null===r||void 0===r?void 0:r.stakeAssetName)&&(0,E.jsx)(_e,{stakeAssetName:r.stakeAssetName})})},Le=["amountToClaim","isWrongNetwork","sx","symbol","blocked","selectedToken"];function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Fe,Ve=function(e){var t=e.amountToClaim,n=e.isWrongNetwork,r=e.sx,a=e.symbol,s=e.blocked,o=e.selectedToken,i=(0,he.Z)(e,Le),c=(0,P.Z)().currentAccount,l=fe(o),u=(0,je.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,G.Z)(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.claimRewards(c,t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:s,deps:[]}),x=u.action,p=u.loadingTxns,v=u.mainTxState,h=u.requiresApproval;return(0,E.jsx)(be.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({requiresApproval:h,blocked:s,preparingTransactions:p,handleAction:x,actionText:(0,E.jsx)(d.cC,{id:"CLAIM {symbol}",values:{symbol:a}}),actionInProgressText:(0,E.jsx)(d.cC,{id:"CLAIMING {symbol}",values:{symbol:a}}),mainTxState:v,isWrongNetwork:n,sx:r},i))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(Fe||(Fe={}));var He=function(e){var t,n,r,a=e.stakeAssetName,s=ae(),o=null===(t=s.stakeGeneralResult)||void 0===t?void 0:t.stakeGeneralUIData[a],i=(0,P.Z)().chainId,c=(0,S.vR)(),l=c.gasLimit,u=c.mainTxState,x=c.txError,p=(0,J.f)(),v=p.currentNetworkConfig,h=p.currentChainId,k="AAVE",f=(0,U.Fv)((null===(n=s.stakeUserResult)||void 0===n?void 0:n.stakeUserUIData[a].userIncentivesToClaim)||"0",18),j=Number(f)*(Number((0,U.Fv)((null===o||void 0===o?void 0:o.stakeTokenPriceEth)||1,18))/Number((0,U.Fv)((null===(r=s.stakeGeneralResult)||void 0===r?void 0:r.stakeGeneralUIData.usdPriceEth)||1,18))),b=void 0;"0"===f&&(b=Fe.NOT_ENOUGH_BALANCE);var g=v.isFork&&v.underlyingChainId===B.chainId?h:B.chainId,y=i!==g,w=(0,F.Mo)(g);return x&&x.blocking?(0,E.jsx)(le.D,{txError:x}):u.success?(0,E.jsx)(ue.R,{action:(0,E.jsx)(d.cC,{id:"Claimed"}),amount:f,symbol:k}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.E,{title:"Claim",symbol:k}),y&&(0,E.jsx)(ve.I,{networkName:w.name,chainId:g}),void 0!==b&&(0,E.jsx)(m.Z,{variant:"helperText",color:"red",children:b===Fe.NOT_ENOUGH_BALANCE?(0,E.jsx)(d.cC,{id:"No rewards to claim"}):null}),(0,E.jsx)(xe.m6,{gasLimit:l,children:(0,E.jsx)(xe.XJ,{description:(0,E.jsx)(d.cC,{id:"Amount"}),symbol:k,futureValue:f,futureValueUSD:j.toString()})}),x&&(0,E.jsx)(de.Q,{txError:x}),(0,E.jsx)(Ve,{sx:{mt:"48px"},amountToClaim:"-1",isWrongNetwork:y,symbol:k,blocked:void 0!==b,selectedToken:a})]})},Me=function(){var e=(0,S.vR)(),t=e.type,n=e.close,r=e.args;return(0,E.jsx)(O.P,{open:t===S.w8.StakeRewardClaim,setOpen:n,children:(null===r||void 0===r?void 0:r.stakeAssetName)&&(0,E.jsx)(He,{stakeAssetName:r.stakeAssetName})})},qe=["amountToUnStake","isWrongNetwork","sx","symbol","blocked","selectedToken"];function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qe,Ye=function(e){var t=e.amountToUnStake,n=e.isWrongNetwork,r=e.sx,a=e.symbol,s=e.blocked,o=e.selectedToken,i=(0,he.Z)(e,qe),c=(0,P.Z)().currentAccount,l=fe(o),u=(0,je.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,G.Z)(R().mark((function e(){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.redeem(c,t.toString()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:!t||0===parseFloat(t)||s,deps:[t]}),x=u.action,p=u.loadingTxns,v=u.mainTxState,h=u.requiresApproval;return(0,E.jsx)(be.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({requiresApproval:h,blocked:s,preparingTransactions:p,handleAction:x,requiresAmount:!0,amount:t,actionText:(0,E.jsx)(d.cC,{id:"UNSTAKE {symbol}",values:{symbol:a}}),actionInProgressText:(0,E.jsx)(d.cC,{id:"UNSTAKING {symbol}",values:{symbol:a}}),mainTxState:v,isWrongNetwork:n,sx:r},i))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(Qe||(Qe={}));var $e,ze=function(e){var t,n,r,a=e.stakeAssetName,s=e.icon,o=ae(),i=null===(t=o.stakeGeneralResult)||void 0===t?void 0:t.stakeGeneralUIData[a],c=(0,P.Z)().chainId,l=(0,S.vR)(),u=l.gasLimit,x=l.mainTxState,p=l.txError,v=(0,J.f)(),h=v.currentNetworkConfig,k=v.currentChainId,f=(0,b.useState)(""),g=f[0],y=f[1],w=(0,b.useRef)(),A=(0,U.Fv)((null===(n=o.stakeUserResult)||void 0===n?void 0:n.stakeUserUIData[a].stakeTokenUserBalance)||"0",18),C="-1"===g,O=C?A:g,T=Number(O)*(Number((0,U.Fv)((null===i||void 0===i?void 0:i.stakeTokenPriceEth)||1,18))/Number((0,U.Fv)((null===(r=o.stakeGeneralResult)||void 0===r?void 0:r.stakeGeneralUIData.usdPriceEth)||1,18))),N=void 0;(0,U.hE)(O).gt(A)&&(N=Qe.NOT_ENOUGH_BALANCE);var I=h.isFork&&h.underlyingChainId===B.chainId?k:B.chainId,Z=c!==I,D=(0,F.Mo)(I);return p&&p.blocking?(0,E.jsx)(le.D,{txError:p}):x.success?(0,E.jsx)(ue.R,{action:(0,E.jsx)(d.cC,{id:"Staked"}),amount:w.current,symbol:s}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(pe.E,{title:"Unstake",symbol:s}),Z&&(0,E.jsx)(ve.I,{networkName:D.name,chainId:I}),(0,E.jsx)(ce.W,{value:O,onChange:function(e){var t="-1"===e;w.current=t?A:e,y(e)},usdValue:T.toString(),symbol:s,assets:[{balance:A,symbol:s}],isMaxSelected:C,maxValue:A}),void 0!==N&&(0,E.jsx)(m.Z,{variant:"helperText",color:"red",children:N===Qe.NOT_ENOUGH_BALANCE?(0,E.jsx)(d.cC,{id:"Not enough staked balance"}):null}),(0,E.jsx)(Pe.g,{gasLimit:(0,j.parseUnits)(u||"0","wei")}),p&&(0,E.jsx)(de.Q,{txError:p}),(0,E.jsx)(Ye,{sx:{mt:"48px"},amountToUnStake:O,isWrongNetwork:Z,symbol:s,blocked:void 0!==N,selectedToken:a})]})},Xe=function(){var e=(0,S.vR)(),t=e.type,n=e.close,r=e.args;return(0,E.jsx)(O.P,{open:t===S.w8.Unstake,setOpen:n,children:(null===r||void 0===r?void 0:r.icon)&&(null===r||void 0===r?void 0:r.stakeAssetName)&&(0,E.jsx)(ze,{icon:r.icon,stakeAssetName:r.stakeAssetName})})},Je=n(22034),et=n(32867),tt=n(33329),nt=n(81391);function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rt.apply(this,arguments)}var at,st=function(e){return b.createElement("svg",rt({width:22,height:16,viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),$e||($e=b.createElement("path",{d:"M3.929 15a9.893 9.893 0 0 1-2.168-3.212 9.813 9.813 0 0 1 0-7.576A9.893 9.893 0 0 1 3.93 1m14.14 0a9.896 9.896 0 0 1 2.168 3.212 9.814 9.814 0 0 1 0 7.576A9.896 9.896 0 0 1 18.07 15m-11-3.112A5.472 5.472 0 0 1 5.445 8c0-1.458.585-2.857 1.626-3.888m7.858 0A5.472 5.472 0 0 1 16.555 8a5.472 5.472 0 0 1-1.626 3.888M12.11 8c0 .292-.117.571-.325.778a1.117 1.117 0 0 1-1.572 0 1.095 1.095 0 0 1 0-1.556 1.117 1.117 0 0 1 1.572 0c.208.206.325.486.325.778Z",stroke:"#A5A8B6",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(this,arguments)}var it=function(e){return b.createElement("svg",ot({width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),at||(at=b.createElement("path",{d:"m7.667 11.245 2.222 2.263 4.444-4.525m6.243-4.544A13.14 13.14 0 0 1 11 1a13.14 13.14 0 0 1-9.576 3.44A13.833 13.833 0 0 0 1 7.85C1 14.177 5.249 19.493 11 21c5.751-1.507 10-6.822 10-13.149 0-1.178-.148-2.321-.424-3.412Z",stroke:"#A5A8B6",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))},ct=function(e){var t=e.tvl,n=e.stkEmission,r=e.loading,a=(0,u.Z)(),s=(0,x.Z)(a.breakpoints.up("lg")),o=(0,x.Z)(a.breakpoints.down("sm")),i=(0,x.Z)(a.breakpoints.down("xsm")),c=o?"main16":"main21",l=o?"secondary16":"secondary21";return(0,E.jsxs)(tt.f,{titleComponent:(0,E.jsxs)(p.Z,{mb:4,children:[(0,E.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",mb:4},children:[(0,E.jsx)("img",{src:"/aave.svg",width:"32px",height:"32px",alt:""}),(0,E.jsx)(m.Z,{variant:i?"h2":s?"display1":"h1",sx:{ml:2,mr:3},children:(0,E.jsx)(d.cC,{id:"Staking"})})]}),(0,E.jsxs)(m.Z,{sx:{color:"#8E92A3",maxWidth:"824px"},children:[(0,E.jsx)(d.cC,{id:"AAVE holders can stake their AAVE in the Safety Module to add more security to the protocol and earn Safety Incentives. In the case of a shortfall event, up to 30% of your stake can be slashed to cover the deficit, providing an additional layer of protection for the protocol."})," ",(0,E.jsx)(oe.rU,{href:"https://docs.aave.com/faq/migration-and-staking",sx:{textDecoration:"underline",color:"#8E92A3"},children:(0,E.jsx)(d.cC,{id:"Learn more about risks involved"})})]})]}),children:[(0,E.jsx)(nt.d,{icon:(0,E.jsx)(it,{}),title:(0,E.jsx)(d.cC,{id:"Funds in the Safety Module"}),loading:r,children:(0,E.jsx)(et.B,{value:t||0,symbol:"USD",variant:c,symbolsVariant:l,symbolsColor:"#A5A8B6",visibleDecimals:2})}),(0,E.jsx)(nt.d,{icon:(0,E.jsx)(st,{}),title:(0,E.jsx)(d.cC,{id:"Total emission per day"}),loading:r,children:(0,E.jsx)(et.B,{value:n||0,symbol:"AAVE",variant:c,symbolsVariant:l,symbolsColor:"#A5A8B6",visibleDecimals:2})})]})},lt=n(55113),dt=n(26447),ut=n(2593),xt=n(87970),pt=n(49212),vt=n(20986),ht=function(e){var t=e.title,n=e.value,r=e.valueUSD,a=e.children,s=e.bottomLineTitle,o=e.bottomLineComponent,i=e.gradientBorder,c=e.dataCy;return(0,E.jsx)(p.Z,{sx:function(e){return{flex:1,display:"flex",borderRadius:"6px",border:"1px solid ".concat(e.palette.divider),position:"relative","&:after":{content:"''",borderRadius:"6px",position:"absolute",top:-1,bottom:-1,left:-1,right:-1,background:i?e.palette.gradients.aaveGradient:"transparent"}}},children:(0,E.jsxs)(p.Z,{sx:function(e){return{flex:1,p:4,display:"flex",alignItems:"center",flexDirection:"column",borderRadius:"6px",background:e.palette.background.paper,position:"relative",zIndex:2}},"data-cy":c,children:[(0,E.jsxs)(p.Z,{sx:{mb:6,display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,E.jsx)(m.Z,{mb:1,color:"text.secondary",children:t}),(0,E.jsx)(et.B,{value:n,visibleDecimals:2,variant:"secondary21",color:0===+n?"text.muted":"text.primary","data-cy":"amountNative"}),(0,E.jsx)(et.B,{value:r,symbol:"USD",visibleDecimals:2,variant:"secondary12",color:0===+r?"text.muted":"text.secondary",symbolsColor:0===+r?"text.muted":"text.secondary","data-cy":"amountUSD"})]}),(0,E.jsx)(p.Z,{sx:{width:"100%",mb:2},children:a}),(0,E.jsx)(vt.X,{caption:s,captionVariant:"caption",captionColor:"text.secondary",width:"100%",children:o})]})})};function mt(e){var t=function(e){return{d:Math.floor(e/86400),h:Math.floor(e%86400/3600),m:Math.floor(e%3600/60),s:Math.floor(e%60)}}(e.seconds),n=t.d,r=t.h,a=t.m,s=t.s;return(0,E.jsxs)(E.Fragment,{children:[0!==n&&(0,E.jsx)("span",{children:(0,E.jsx)(d.cC,{id:"{d}d",values:{d:n}})}),0!==r&&(0,E.jsx)("span",{children:(0,E.jsx)(d.cC,{id:"{h}h",values:{h:r}})}),0!==a&&(0,E.jsx)("span",{children:(0,E.jsx)(d.cC,{id:"{m}m",values:{m:a}})}),0!==s&&(0,E.jsx)("span",{children:(0,E.jsx)(d.cC,{id:"{s}s",values:{s:s}})})]})}var kt=function(e){var t=e.onStakeAction,n=e.onStakeRewardClaimAction,r=e.onCooldownAction,a=e.onUnstakeAction,s=e.stakeTitle,o=e.stakedToken,i=e.description,c=e.headerAction,l=e.icon,v=e.stakeData,h=e.stakeUserData,k=e.ethUsdPrice,f=e.maxSlash,b=(0,u.Z)().breakpoints,g=(0,x.Z)(b.up("xsm")),w=(0,xt.p)(1),A=(null===v||void 0===v?void 0:v.stakeCooldownSeconds)||0,C=(null===h||void 0===h?void 0:h.userCooldown)||0,O=(null===v||void 0===v?void 0:v.stakeUnstakeWindow)||0,N=w-C,I=N<A+O,S=I&&N>A&&N<O+A,P=(0,j.formatEther)(ut.O$.from((null===h||void 0===h?void 0:h.underlyingTokenUserBalance)||"0").mul((null===v||void 0===v?void 0:v.stakeTokenPriceEth)||"0").div(k||"1")),Z=(0,j.formatEther)(ut.O$.from((null===h||void 0===h?void 0:h.stakeTokenUserBalance)||"0").mul((null===v||void 0===v?void 0:v.stakeTokenPriceEth)||"0").div(k||"1")),D=(0,j.formatEther)(ut.O$.from((null===h||void 0===h?void 0:h.userIncentivesToClaim)||"0").mul((null===v||void 0===v?void 0:v.rewardTokenPriceEth)||"0").div(k||"1")),B=(0,j.formatEther)((0,U.hE)((null===h||void 0===h?void 0:h.stakeTokenUserBalance)||"0").dividedBy((null===v||void 0===v?void 0:v.stakeTokenTotalSupply)||"1").multipliedBy((null===v||void 0===v?void 0:v.distributionPerSecond)||"0").multipliedBy("2592000").toFixed(0));return(0,E.jsxs)(lt.Z,{sx:{p:{xs:4,xsm:6},pt:4,height:"100%"},children:[(0,E.jsxs)(p.Z,{sx:{display:{xs:"none",xsm:"flex"},alignItems:"center",mb:8},children:[(0,E.jsxs)(m.Z,{variant:"h3",children:[(0,E.jsx)(d.cC,{id:"Stake"})," ",s]}),c&&(0,E.jsx)(p.Z,{sx:{ml:3},children:c})]}),(0,E.jsxs)(p.Z,{sx:function(e){return{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",xsm:"center"},flexDirection:{xs:"column",xsm:"row"},gap:{xs:0,xsm:2},borderRadius:{xs:0,xsm:"6px"},border:{xs:"unset",xsm:"1px solid ".concat(e.palette.divider)},p:{xs:0,xsm:4},background:{xs:"unset",xsm:e.palette.background.paper},position:"relative","&:after":{content:"''",position:"absolute",bottom:0,left:"-16px",width:"calc(100% + 32px)",height:"1px",bgcolor:{xs:"divider",xsm:"transparent"}}}},children:[(0,E.jsxs)(p.Z,{sx:{display:"flex",width:{xs:"100%",xsm:"unset"},justifyContent:"space-between",alignItems:"center",mb:{xs:4,xsm:0}},children:[(0,E.jsx)(T.T1,{symbol:l,sx:{fontSize:{xs:"40px",xsm:"32px"}}}),(0,E.jsx)(m.Z,{variant:g?"subheader1":"h4",ml:2,children:o}),c&&(0,E.jsx)(p.Z,{sx:{display:{xs:"block",xsm:"none"},textAlign:"right",flexGrow:1},children:c})]}),(0,E.jsxs)(p.Z,{sx:{display:{xs:"flex",xsm:"block"},width:{xs:"100%",xsm:"unset"},justifyContent:"space-between",alignItems:"center",mb:{xs:4,xsm:0}},children:[(0,E.jsx)(m.Z,{variant:g?"subheader2":"description",color:g?"text.secondary":"text.primary",children:(0,E.jsx)(d.cC,{id:"Staking APR"})}),(0,E.jsx)(et.B,{value:parseFloat((null===v||void 0===v?void 0:v.stakeApy)||"0")/1e4,percent:!0,variant:"secondary14"})]}),(0,E.jsxs)(p.Z,{sx:{display:{xs:"flex",xsm:"block"},width:{xs:"100%",xsm:"unset"},justifyContent:"space-between",alignItems:"center",mb:{xs:4,xsm:0}},children:[(0,E.jsx)(m.Z,{variant:g?"subheader2":"description",color:g?"text.secondary":"text.primary",children:(0,E.jsx)(d.cC,{id:"Max slashing"})}),(0,E.jsx)(et.B,{value:f,percent:!0,variant:"secondary14"})]}),(0,E.jsx)(y.Z,{variant:"contained",sx:{minWidth:"96px",mb:{xs:6,xsm:0}},onClick:t,disabled:0===+P,fullWidth:!g,"data-cy":"stakeBtn_".concat(o.toUpperCase()),children:(0,E.jsx)(d.cC,{id:"Stake"})})]}),(0,E.jsxs)(dt.Z,{spacing:4,direction:{xs:"column",xsm:"row"},sx:{mt:4},children:[(0,E.jsxs)(ht,{title:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(d.cC,{id:"Staked"})," ",o]}),value:(0,j.formatEther)((null===h||void 0===h?void 0:h.stakeTokenUserBalance)||"0"),valueUSD:Z,dataCy:"stakedBox_".concat(o),bottomLineTitle:(0,E.jsx)(pt.G,{variant:"caption",text:I&&!S?(0,E.jsx)(d.cC,{id:"Cooldown time left"}):S?(0,E.jsx)(d.cC,{id:"Time left to unstake"}):(0,E.jsx)(d.cC,{id:"Cooldown period"}),children:(0,E.jsx)(E.Fragment,{children:I&&!S?(0,E.jsx)(d.cC,{id:"Time left to be able to withdraw your staked asset."}):S?(0,E.jsx)(d.cC,{id:"Time left until the withdrawal window closes."}):(0,E.jsx)(d.cC,{id:"You can only withdraw your assets from the Security Module after the cooldown period ends and the unstake window is active."})})}),bottomLineComponent:(0,E.jsx)(E.Fragment,{children:I&&!S?(0,E.jsx)(m.Z,{variant:"secondary14",sx:{display:"inline-flex",gap:1},children:(0,E.jsx)(mt,{seconds:A-N})}):S?(0,E.jsx)(m.Z,{variant:"secondary14",sx:{display:"inline-flex",gap:1},children:(0,E.jsx)(mt,{seconds:O+A-N})}):(0,E.jsx)(m.Z,{variant:"secondary14",children:(0,E.jsx)(mt,{seconds:A})})}),gradientBorder:S,children:[S&&(0,E.jsx)(y.Z,{variant:"gradient",fullWidth:!0,onClick:a,"data-cy":"unstakeBtn_".concat(o),children:(0,E.jsx)(d.cC,{id:"Unstake now"})}),I&&!S&&(0,E.jsx)(y.Z,{variant:"outlined",fullWidth:!0,disabled:!0,"data-cy":"awaitCoolDownBtn_".concat(o),children:(0,E.jsx)(d.cC,{id:"Cooling down..."})}),!I&&(0,E.jsx)(y.Z,{variant:"outlined",fullWidth:!0,onClick:r,disabled:"0"===(null===h||void 0===h?void 0:h.stakeTokenUserBalance),"data-cy":"coolDownBtn_".concat(o),children:(0,E.jsx)(d.cC,{id:"Cooldown to unstake"})})]}),(0,E.jsx)(ht,{title:(0,E.jsx)(d.cC,{id:"Claimable AAVE"}),value:(0,j.formatEther)((null===h||void 0===h?void 0:h.userIncentivesToClaim)||"0"),valueUSD:D,bottomLineTitle:(0,E.jsx)(d.cC,{id:"Aave per month"}),dataCy:"rewardBox_".concat(o),bottomLineComponent:(0,E.jsx)(et.B,{value:B,visibleDecimals:2,variant:"secondary14",color:0===+B?"text.disabled":"text.primary"}),children:(0,E.jsx)(y.Z,{variant:"contained",onClick:n,fullWidth:!0,disabled:"0"===(null===h||void 0===h?void 0:h.userIncentivesToClaim),"data-cy":"claimBtn_".concat(o),children:(0,E.jsx)(d.cC,{id:"Claim AAVE"})})})]}),!!i&&i]})},ft=n(95718);function jt(){var e,t,n,r,a,s,o,i,c,l,y,w,A,C=(0,P.Z)(),O=C.currentAccount,T=C.loading,N=ae(),U=(0,S.vR)(),Z=U.openStake,D=U.openStakeCooldown,B=U.openUnstake,G=U.openStakeRewardsClaim,_=(0,u.Z)().breakpoints,R=(0,x.Z)(_.up("lg")),L=(0,b.useState)(""),W=L[0],F=L[1];(0,b.useEffect)((function(){W||F("aave")}),[R]);var V=(0,j.formatEther)(f.BigNumber.from((null===(e=N.stakeGeneralResult)||void 0===e?void 0:e.stakeGeneralUIData.aave.stakeTokenTotalSupply)||"0").mul((null===(t=N.stakeGeneralResult)||void 0===t?void 0:t.stakeGeneralUIData.aave.stakeTokenPriceEth)||"0").add(f.BigNumber.from((null===(n=N.stakeGeneralResult)||void 0===n?void 0:n.stakeGeneralUIData.bpt.stakeTokenTotalSupply)||"0").mul((null===(r=N.stakeGeneralResult)||void 0===r?void 0:r.stakeGeneralUIData.bpt.stakeTokenPriceEth)||"0")).div((null===(a=N.stakeGeneralResult)||void 0===a?void 0:a.stakeGeneralUIData.usdPriceEth)||1)),H=(0,j.formatEther)(f.BigNumber.from((null===(s=N.stakeGeneralResult)||void 0===s?void 0:s.stakeGeneralUIData.aave.distributionPerSecond)||"0").add((null===(o=N.stakeGeneralResult)||void 0===o?void 0:o.stakeGeneralUIData.bpt.distributionPerSecond)||"0").mul("86400")),M="aave"===W;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ct,{tvl:V,stkEmission:H,loading:N.loading}),(0,E.jsx)(g.O,{children:O?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(p.Z,{sx:{display:{xs:"flex",lg:"none"},justifyContent:{xs:"center",xsm:"flex-start"},mb:{xs:3,xsm:4}},children:(0,E.jsxs)(v.Z,{color:"primary",value:W,exclusive:!0,onChange:function(e,t){return F(t)},sx:{width:{xs:"100%",xsm:"359px"}},children:[(0,E.jsx)(h.Z,{value:"aave",disabled:"aave"===W,children:(0,E.jsx)(m.Z,{variant:"subheader1",children:(0,E.jsx)(d.cC,{id:"Stake AAVE"})})}),(0,E.jsx)(h.Z,{value:"bpt",disabled:"bpt"===W,children:(0,E.jsx)(m.Z,{variant:"subheader1",children:(0,E.jsx)(d.cC,{id:"Stake ABPT"})})})]})}),(0,E.jsxs)(k.ZP,{container:!0,spacing:4,children:[(0,E.jsx)(k.ZP,{item:!0,xs:12,lg:6,sx:{display:{xs:M?"block":"none",lg:"block"}},children:(0,E.jsx)(kt,{stakeTitle:"AAVE",stakedToken:"AAVE",maxSlash:"0.3",icon:"aave",stakeData:null===(i=N.stakeGeneralResult)||void 0===i?void 0:i.stakeGeneralUIData.aave,stakeUserData:null===(c=N.stakeUserResult)||void 0===c?void 0:c.stakeUserUIData.aave,ethUsdPrice:null===(l=N.stakeGeneralResult)||void 0===l?void 0:l.stakeGeneralUIData.usdPriceEth,onStakeAction:function(){return Z("aave","AAVE")},onCooldownAction:function(){return D("aave")},onUnstakeAction:function(){return B("aave","AAVE")},onStakeRewardClaimAction:function(){return G("aave")}})}),(0,E.jsx)(k.ZP,{item:!0,xs:12,lg:6,sx:{display:{xs:M?"none":"block",lg:"block"}},children:(0,E.jsx)(kt,{stakeTitle:"ABPT",stakedToken:"ABPT",maxSlash:"0.3",icon:"stkbpt",stakeData:null===(y=N.stakeGeneralResult)||void 0===y?void 0:y.stakeGeneralUIData.bpt,stakeUserData:null===(w=N.stakeUserResult)||void 0===w?void 0:w.stakeUserUIData.bpt,ethUsdPrice:null===(A=N.stakeGeneralResult)||void 0===A?void 0:A.stakeGeneralUIData.usdPriceEth,onStakeAction:function(){return Z("bpt","stkBPT")},onCooldownAction:function(){return D("bpt")},onUnstakeAction:function(){return B("bpt","stkBPT")},onStakeRewardClaimAction:function(){return G("bpt")},headerAction:(0,E.jsx)(I,{})})})]})]}):(0,E.jsx)(ft.w,{description:(0,E.jsx)(d.cC,{id:"We couldn\u2019t detect a wallet. Connect a wallet to stake."}),loading:T})})]})}jt.getLayout=function(e){return(0,E.jsx)(Je.Z,{children:(0,E.jsx)(ke,{children:(0,E.jsxs)(re,{children:[e,(0,E.jsx)(Oe,{}),(0,E.jsx)(Re,{}),(0,E.jsx)(Xe,{}),(0,E.jsx)(Me,{})]})})})}},81391:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var r=n(2734),a=n(98396),s=n(87357),o=n(15861),i=n(88078),c=n(85893),l=function(e){var t=e.icon,n=e.title,l=e.titleIcon,d=e.children,u=e.hideIcon,x=e.variant,p=void 0===x?"dark":x,v=e.withLine,h=e.loading,m=e.withoutIconWrapper,k=(0,r.Z)(),f=(0,a.Z)(k.breakpoints.up("sm"));return(0,c.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",width:{xs:"calc(50% - 12px)",xsm:"unset"}},children:[v&&(0,c.jsx)(s.Z,{sx:{mr:8,my:"auto",width:"1px",bgcolor:"#F2F3F729",height:"37px"}}),!u&&(m?t&&t:(0,c.jsx)(s.Z,{sx:{display:{xs:"none",md:"flex"},alignItems:"center",justifyContent:"center",border:"1px solid #EBEBED1F",borderRadius:"12px",bgcolor:"#383D51",boxShadow:"0px 2px 1px rgba(0, 0, 0, 0.05), 0px 0px 1px rgba(0, 0, 0, 0.25)",width:42,height:42,mr:3},children:t&&t})),(0,c.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,c.jsxs)(s.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,c.jsx)(o.Z,{sx:{color:"dark"===p?"#A5A8B6":"#62677B"},variant:f?"description":"caption",component:"div",children:n}),l&&l]}),h?(0,c.jsx)(i.Z,{height:f?28:24,sx:{background:"#383D51"}}):d]})]})}},12523:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=n(34386),a=n(87357),s=n(85893),o=function(e){var t=e.title,n=e.children;return(0,s.jsx)("div",{children:(0,s.jsx)(r.Z,{placement:"top",componentsProps:{tooltip:{sx:{bgcolor:"rgba(15, 18, 29, 0.8)","& .MuiTooltip-arrow":{color:"rgba(15, 18, 29, 0.8)"}}},popper:{modifiers:[{name:"offset",options:{offset:[0,-8]}}]}},title:(0,s.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:t}),children:n})})}},57502:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/staking",function(){return n(67421)}])}},function(e){e.O(0,[896,125,280,718,774,888,179],(function(){return t=57502,e(e.s=t);var t}));var t=e.O();_N_E=t}]);