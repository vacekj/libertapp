"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[194],{9194:function(e,t,r){r.r(t),r.d(t,{__N_SSG:function(){return de},default:function(){return le}});var n=r(59499),i=r(4730),s=r(50029),o=r(87794),a=r.n(o),c=r(85169),x=r(1279),d=r(42833),l=r(84563),p=r(64232),u=r(90948),h=r(2734),j=r(98396),m=r(86886),v=r(55113),f=r(15861),g=r(87357),Z=r(88078),b=r(83321),y=r(53219),C=r(27484),w=r.n(C),k=r(67294),O=r(44816),V=r(72355),T=r(83932),P=r(84521),E=r(32867),I=r(20986),N=r(1452),A=r(27923),D=r(22034),S=r(93973),Y=r(38577),_=r(33329),G=r(85893),F=function(){return(0,G.jsx)(_.f,{children:(0,G.jsx)(g.Z,{sx:{display:"flex",alignItems:"center",mb:"18px"},children:(0,G.jsx)(b.Z,{component:Y.rU,href:Y.Z6.governance,variant:"surface",size:"medium",color:"primary",startIcon:(0,G.jsx)(y.Z,{fontSize:"small",children:(0,G.jsx)(S.Z,{})}),children:(0,G.jsx)(c.cC,{id:"Go back"})})})})},R=r(19091),W=r(21737),B=r(94010),M=r(44949),U=r(72005);function X(e){var t=e.id,r=e.state,n=e.strategy,i=e.startBlock,o=(0,M.vR)().openGovVote,d=(0,U.Z)().currentAccount,l=(0,k.useState)(),p=l[0],u=l[1],h=(0,k.useState)(),j=h[0],m=h[1],v=(0,k.useState)(),g=v[0],Z=v[1],y=(0,k.useState)("0"),C=y[0],w=y[1],O=(0,N.y)().governanceService,V=r===R.r7.Active,T=function(){var e=(0,s.Z)(a().mark((function e(){var r,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.getVoteOnProposal({user:d,proposalId:t});case 3:r=e.sent,n=r.support,(i=r.votingPower)&&"0"!==i.toString()?(m(n),u((0,x.Fv)(i.toString(),18)),Z(!0)):Z(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error fetching vote info",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.getVotingPowerAt({user:d,block:i,strategy:n});case 3:r=e.sent,w(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error fetching voting power for proposal",t);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,k.useEffect)((function(){d?(T(),P()):(m(void 0),Z(void 0),u(void 0),w("0"))}),[V,d,i]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(f.Z,{variant:"h3",sx:{mb:8},children:(0,G.jsx)(c.cC,{id:"Your voting info"})}),d&&!g&&!V&&(0,G.jsx)(f.Z,{sx:{textAlign:"center"},color:"text.muted",children:(0,G.jsx)(c.cC,{id:"You did not participate in this proposal"})}),d&&V&&(0,G.jsx)(I.X,{caption:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(f.Z,{variant:"description",children:(0,G.jsx)(c.cC,{id:"Voting power"})}),(0,G.jsx)(f.Z,{variant:"caption",color:"text.secondary",children:"(AAVE + stkAAVE)"})]}),children:(0,G.jsx)(E.B,{value:C||0,variant:"main16",visibleDecimals:2})}),d&&g&&(0,G.jsxs)(W.Z,{severity:j?"success":"error",sx:{my:2},children:[(0,G.jsx)(f.Z,{variant:"subheader1",children:(0,G.jsx)(c.cC,{id:"You voted {0}",values:{0:j?"YAE":"NAY"}})}),(0,G.jsx)(f.Z,{variant:"caption",children:(0,G.jsx)(c.cC,{id:"With a voting power of <0/>",components:{0:(0,G.jsx)(E.B,{value:p||0,variant:"caption",visibleDecimals:2})}})})]}),d&&V&&0===Number(C)&&(0,G.jsx)(W.Z,{severity:"warning",sx:{my:2},children:(0,G.jsx)(c.cC,{id:"Not enough voting power to participate in this proposal"})}),!g&&d&&V&&0!==Number(C)&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(b.Z,{color:"success",variant:"contained",fullWidth:!0,onClick:function(){return o(t,!0,C)},children:(0,G.jsx)(c.cC,{id:"Vote YAE"})}),(0,G.jsx)(b.Z,{color:"error",variant:"contained",fullWidth:!0,onClick:function(){return o(t,!1,C)},sx:{mt:2},children:(0,G.jsx)(c.cC,{id:"Vote NAY"})})]}),!d&&(0,G.jsx)(B.p,{})]})}var q=r(10014),H=r(72482),Q=r(67525),L=r(79668),z=r(3176),J=r(58537),K=r(75766),$=r(64283),ee=r(40013),te=r(45802),re=["node"],ne=["node"],ie=["node"],se=["values"];function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce=(0,u.ZP)("img")({display:"block",margin:"0 auto",maxWidth:"100%"}),xe=(0,u.ZP)("a")({color:"inherit"}),de=!0;function le(e){var t=e.proposal,r=e.ipfs,n=e.prerendered,o=(0,k.useState)(""),u=o[0],C=o[1],N=(0,k.useState)(t),D=N[0],S=N[1],_=(0,k.useState)(!D||!(0,L.u)(D)),R=_[0],W=_[1],B=(0,h.Z)().breakpoints,M=(0,j.Z)(B.up("xsm")),U=!D||!(0,L.u)(D);function ee(){return(ee=(0,s.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Q.M.getProposal({proposalId:D.id});case 4:return t=e.sent,t.values,r=(0,i.Z)(t,se),e.t0=S,e.next=10,(0,H.r)(r);case 10:e.t1=e.sent,(0,e.t0)(e.t1),W(!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,A.W)((function(){return ee.apply(this,arguments)}),R?5e3:3e4,!U,[]),(0,k.useEffect)((function(){!D&&t&&S(t),W(!1)}),[t]),(0,k.useEffect)((function(){C(window.location.href)}),[]);var oe=D?(0,H.J)(D):{yaeVotes:0,yaePercent:0,nayPercent:0,nayVotes:0,diffReached:!1,quorumReached:!1,minQuorumVotes:0,requiredDiff:0,diff:0},de=oe.yaeVotes,le=oe.yaePercent,pe=oe.nayPercent,ue=oe.nayVotes,he=oe.diffReached,je=oe.quorumReached,me=oe.requiredDiff,ve=oe.minQuorumVotes,fe=oe.diff;return(0,G.jsxs)(G.Fragment,{children:[r&&(0,G.jsx)(T.h,{imageUrl:K.Z.src,title:r.title,description:r.shortDescription}),(0,G.jsx)(F,{}),(0,G.jsx)($.O,{children:(0,G.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,G.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,G.jsxs)(v.Z,{sx:{px:6,pt:4,pb:12},children:[(0,G.jsx)(f.Z,{variant:"h3",children:(0,G.jsx)(c.cC,{id:"Proposal overview"})}),(0,G.jsxs)(g.Z,{sx:{px:{md:18},pt:8},children:[(0,G.jsx)(f.Z,{variant:"h2",sx:{mb:6},children:(null===r||void 0===r?void 0:r.title)||(0,G.jsx)(Z.Z,{})}),D&&r?(0,G.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,G.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"},children:[(0,G.jsx)(g.Z,{sx:{mr:"24px",mb:{xs:"2px",sm:0}},children:(0,G.jsx)(q.U,{state:D.state,loading:R})}),!R&&(0,G.jsx)(te.G,{state:D.state,executionTime:D.executionTime,executionTimeWithGracePeriod:D.executionTimeWithGracePeriod,expirationTimestamp:D.expirationTimestamp})]}),(0,G.jsx)(g.Z,{sx:{flexGrow:1}}),(0,G.jsx)(b.Z,{component:"a",target:"_blank",rel:"noopener",href:"".concat(J.d.ipfsGateway,"/").concat(r.ipfsHash),startIcon:(0,G.jsx)(y.Z,{sx:{"& path":{strokeWidth:"1"}},children:(0,G.jsx)(d.Z,{})}),children:M&&(0,G.jsx)(c.cC,{id:"Raw-Ipfs"})}),(0,G.jsx)(b.Z,{component:"a",target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(r.title),"&url=").concat(u),startIcon:(0,G.jsx)(p.Z,{}),children:M&&(0,G.jsx)(c.cC,{id:"Share on twitter"})})]}):(0,G.jsx)(f.Z,{variant:"buttonL",children:(0,G.jsx)(Z.Z,{})}),r?(0,G.jsx)(O.D,{remarkPlugins:[V.Z],components:{img:function(e){var t=e.src,r=e.alt;return(0,G.jsx)(ce,{src:t,alt:r})},a:function(e){e.node;var t=(0,i.Z)(e,re);return(0,G.jsx)(xe,ae({},t))},h2:function(e){e.node;var t=(0,i.Z)(e,ne);return(0,G.jsx)(f.Z,ae({variant:"subheader1",sx:{mt:6},gutterBottom:!0},t))},p:function(e){e.node;var t=(0,i.Z)(e,ie);return(0,G.jsx)(f.Z,ae({variant:"description"},t))}},children:r.description}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Z.Z,{variant:"text",sx:{my:4}}),(0,G.jsx)(Z.Z,{variant:"rectangular",height:200,sx:{my:4}}),(0,G.jsx)(Z.Z,{variant:"text",sx:{my:4}}),(0,G.jsx)(Z.Z,{variant:"rectangular",height:400,sx:{my:4}})]})]})]})}),(0,G.jsxs)(m.ZP,{item:!0,xs:12,md:4,children:[(0,G.jsx)(v.Z,{sx:{px:6,py:4,mb:2.5},children:D&&(0,G.jsx)(X,ae({},D))}),(0,G.jsxs)(v.Z,{sx:{px:6,py:4,mb:2.5},children:[(0,G.jsx)(f.Z,{variant:"h3",children:(0,G.jsx)(c.cC,{id:"Voting results"})}),D?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(z.A,{yae:!0,percent:le,votes:de,sx:{mt:8},loading:R}),(0,G.jsx)(z.A,{percent:pe,votes:ue,sx:{mt:3},loading:R}),(0,G.jsx)(I.X,{caption:(0,G.jsx)(c.cC,{id:"State"}),sx:{height:48,mt:10},captionVariant:"description",children:(0,G.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[(0,G.jsx)(q.U,{state:D.state,loading:R}),(0,G.jsx)(g.Z,{sx:{mt:"2px"},children:(0,G.jsx)(te.G,{state:D.state,executionTime:D.executionTime,expirationTimestamp:D.expirationTimestamp,executionTimeWithGracePeriod:D.executionTimeWithGracePeriod})})]})}),(0,G.jsx)(I.X,{caption:(0,G.jsx)(c.cC,{id:"Quorum"}),sx:{height:48},captionVariant:"description",children:(0,G.jsx)(P.o,{loading:R,text:je?(0,G.jsx)(c.cC,{id:"Reached"}):(0,G.jsx)(c.cC,{id:"Not reached"}),checked:je,sx:{height:48},variant:"description"})}),(0,G.jsx)(I.X,{caption:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(c.cC,{id:"Current votes"}),(0,G.jsx)(f.Z,{variant:"caption",color:"text.muted",children:"Required"})]}),sx:{height:48},captionVariant:"description",children:(0,G.jsxs)(g.Z,{sx:{textAlign:"right"},children:[(0,G.jsx)(E.B,{value:de,visibleDecimals:2,sx:{display:"block"}}),(0,G.jsx)(E.B,{variant:"caption",value:ve,visibleDecimals:2,color:"text.muted"})]})}),(0,G.jsx)(I.X,{caption:(0,G.jsx)(c.cC,{id:"Differential"}),sx:{height:48},captionVariant:"description",children:(0,G.jsx)(P.o,{loading:R,text:he?(0,G.jsx)(c.cC,{id:"Reached"}):(0,G.jsx)(c.cC,{id:"Not reached"}),checked:he,sx:{height:48},variant:"description"})}),(0,G.jsx)(I.X,{caption:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(c.cC,{id:"Current differential"}),(0,G.jsx)(f.Z,{variant:"caption",color:"text.muted",children:"Required"})]}),sx:{height:48},captionVariant:"description",children:(0,G.jsxs)(g.Z,{sx:{textAlign:"right"},children:[(0,G.jsx)(E.B,{value:fe,visibleDecimals:2,sx:{display:"block"}}),(0,G.jsx)(E.B,{variant:"caption",value:me,visibleDecimals:2,color:"text.muted"})]})}),(0,G.jsx)(I.X,{caption:(0,G.jsx)(c.cC,{id:"Total voting power"}),sx:{height:48},captionVariant:"description",children:(0,G.jsx)(E.B,{value:(0,x.Fv)(D.totalVotingSupply,18),visibleDecimals:0,compact:!1})})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Z.Z,{height:28,sx:{mt:8}}),(0,G.jsx)(Z.Z,{height:28,sx:{mt:8}})]})]}),(0,G.jsxs)(v.Z,{sx:{px:6,py:4},children:[(0,G.jsx)(f.Z,{variant:"h3",sx:{mb:"22px"},children:(0,G.jsx)(c.cC,{id:"Proposal details"})}),D?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(I.X,{caption:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(c.cC,{id:"Created"}),(0,G.jsx)(f.Z,{variant:"caption",color:"text.muted",children:"Block"})]}),sx:{height:48},captionVariant:"description",children:(0,G.jsxs)(g.Z,{sx:{textAlign:"right"},children:[(0,G.jsxs)(f.Z,{children:["~ ",w().unix(D.creationTimestamp).format("DD MMM YYYY, hh:mm a")]}),(0,G.jsx)(f.Z,{variant:"caption",color:"text.muted",children:D.proposalCreated})]})}),(0,G.jsx)(I.X,{caption:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(c.cC,{id:"Started"}),(0,G.jsx)(f.Z,{variant:"caption",color:"text.muted",children:"Block"})]}),sx:{height:48},captionVariant:"description",children:(0,G.jsxs)(g.Z,{sx:{textAlign:"right"},children:[(0,G.jsxs)(f.Z,{children:["~ ",w().unix(D.startTimestamp).format("DD MMM YYYY, hh:mm a")]}),(0,G.jsx)(f.Z,{variant:"caption",color:"text.muted",children:D.startBlock})]})}),D.executed&&(0,G.jsx)(I.X,{caption:(0,G.jsx)(c.cC,{id:"Executed"}),sx:{height:48},captionVariant:"description",children:(0,G.jsx)(f.Z,{children:w().unix(D.executionTime).format("DD MMM YYYY, hh:mm a")})}),(null===r||void 0===r?void 0:r.author)&&(0,G.jsx)(I.X,{caption:(0,G.jsx)(c.cC,{id:"Author"}),sx:{height:48},captionVariant:"description",children:(0,G.jsx)(f.Z,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:r.author})}),(0,G.jsxs)(g.Z,{sx:{mt:10,mb:2,display:"flex",gap:2},children:[(null===r||void 0===r?void 0:r.discussions)&&(0,G.jsx)(b.Z,{component:Y.rU,target:"_blank",rel:"noopener",href:r.discussions,variant:"outlined",endIcon:(0,G.jsx)(y.Z,{children:(0,G.jsx)(l.Z,{})}),children:(0,G.jsx)(c.cC,{id:"Forum discussion"})}),n&&(0,G.jsx)(b.Z,{component:Y.rU,target:"_blank",rel:"noopener",href:"https://github.com/bgd-labs/seatbelt-for-ghosts/tree/master/reports/Aave/0xEC568fffba86c094cf06b22134B23074DFE2252c/".concat(String(D.id).padStart(3,"0"),".md"),variant:"outlined",endIcon:(0,G.jsx)(y.Z,{children:(0,G.jsx)(l.Z,{})}),children:(0,G.jsx)(c.cC,{id:"Seatbelt report"})})]})]}):(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(Z.Z,{variant:"rectangular",height:600})})]})]})]})})]})}le.getLayout=function(e){return(0,G.jsx)(D.Z,{children:(0,G.jsxs)(N.C,{children:[e,(0,G.jsx)(ee.m,{})]})})}},40013:function(e,t,r){r.d(t,{m:function(){return V}});r(67294);var n,i=r(44949),s=r(15629),o=r(85169),a=r(15861),c=r(45555),x=r(72005),d=r(58537),l=r(2450),p=r(40429),u=r(83063),h=r(44880),j=r(67944),m=r(37096),v=r(19408),f=r(50029),g=r(87794),Z=r.n(g),b=r(92997),y=r(1452),C=r(75670),w=r(85893),k=function(e){var t=e.isWrongNetwork,r=e.blocked,n=e.proposalId,i=e.support,s=(0,y.y)().governanceService,a=(0,x.Z)().currentAccount,c=(0,b.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,f.Z)(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.submitVote({proposalId:Number(n),user:a,support:i||!1}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:r,deps:[]}),d=c.action,l=c.loadingTxns,p=c.mainTxState,u=c.requiresApproval;return(0,w.jsx)(C.B,{requiresApproval:u,blocked:r,mainTxState:p,preparingTransactions:l,handleAction:d,actionText:i?(0,w.jsx)(o.cC,{id:"VOTE YAE"}):(0,w.jsx)(o.cC,{id:"VOTE NAY"}),actionInProgressText:i?(0,w.jsx)(o.cC,{id:"VOTE YAE"}):(0,w.jsx)(o.cC,{id:"VOTE NAY"}),isWrongNetwork:t})};!function(e){e[e.NOT_ENOUGH_VOTING_POWER=0]="NOT_ENOUGH_VOTING_POWER"}(n||(n={}));var O=function(e){var t=e.proposalId,r=e.support,s=e.power,f=(0,x.Z)().chainId,g=(0,i.vR)(),Z=g.gasLimit,b=g.mainTxState,y=g.txError,C=(0,c.f)(),O=C.currentNetworkConfig,V=C.currentChainId,T=void 0;"0"===s&&(T=n.NOT_ENOUGH_VOTING_POWER);var P=O.isFork&&O.underlyingChainId===d.d.chainId?V:d.d.chainId,E=f!==P,I=(0,l.Mo)(P);return y&&y.blocking?(0,w.jsx)(p.D,{txError:y}):b.success?(0,w.jsx)(h.R,{action:(0,w.jsx)(o.cC,{id:"Vote"})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.E,{title:"Governance vote"}),E&&(0,w.jsx)(v.I,{networkName:I.name,chainId:P}),void 0!==T&&(0,w.jsx)(a.Z,{variant:"helperText",color:"red",children:T===n.NOT_ENOUGH_VOTING_POWER?(0,w.jsx)(a.Z,{children:(0,w.jsx)(o.cC,{id:"No voting power"})}):null}),(0,w.jsx)(j.m6,{gasLimit:Z,children:(0,w.jsx)(j.oD,{description:(0,w.jsx)(o.cC,{id:"Voting power"}),value:s})}),y&&(0,w.jsx)(u.Q,{txError:y}),(0,w.jsx)(k,{proposalId:t,support:r,isWrongNetwork:E,blocked:void 0!==T})]})},V=function(){var e=(0,i.vR)(),t=e.type,r=e.close,n=e.args;return(0,w.jsx)(s.P,{open:t===i.w8.GovVote,setOpen:r,children:(null===n||void 0===n?void 0:n.power)&&(null===n||void 0===n?void 0:n.proposalId)&&void 0!==(null===n||void 0===n?void 0:n.support)&&(0,w.jsx)(O,{proposalId:n.proposalId,support:n.support,power:n.power})})}}}]);